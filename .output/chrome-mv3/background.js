var background=(function(){"use strict";function z(e){return e==null||typeof e=="function"?{main:e}:e}const q=e=>Array.isArray(e)?e.map(n=>{if(!n||typeof n!="object")return null;const s=n;if(!s.id||!s.name||!Array.isArray(s.fields))return null;const $=s.fields.map(D=>{if(!D||typeof D!="object")return null;const p=D;return!p.id||!p.name||!p.selector||!p.xpath||!p.mode||!p.source?null:{id:p.id,name:p.name,selector:p.selector,xpath:p.xpath,mode:p.mode,source:p.source,attrName:p.attrName,regex:typeof p.regex=="string"?p.regex:void 0,regexFlags:typeof p.regexFlags=="string"?p.regexFlags:void 0}}).filter(D=>D!==null);return{id:s.id,name:s.name,fields:$,createdAt:s.createdAt??Date.now(),updatedAt:s.updatedAt??Date.now()}}).filter(n=>n!==null):[],H=e=>{var s;if(!e||typeof e!="object")return{name:"",fields:[],isPicking:!1};const n=e;return{name:typeof n.name=="string"?n.name:"",fields:((s=q([{id:"draft",name:"draft",fields:n.fields??[]}])[0])==null?void 0:s.fields)??[],isPicking:!!n.isPicking}},O="xcalibr_state",T={version:1,isOpen:!1,isWide:!1,isVisible:!0,searchQuery:"",tabOffsetY:0,showMenuBar:!1,isAnchored:!1,menuBarActiveMenu:null,menuBarActiveSubmenu:null,scrapers:[],scraperDraft:{name:"",fields:[],isPicking:!1},scraperBuilderOpen:!1,scraperRunnerOpen:!1,scraperRunnerId:null,scraperRunnerResults:null,scraperRunnerError:null,quickBarToolIds:[],toolWindows:{},toolData:{}},_=e=>{if(!e||typeof e!="object")return{...T};const n=e,s=typeof n.tabOffsetY=="number"?n.tabOffsetY:T.tabOffsetY,$=typeof n.isAnchored=="boolean"?n.isAnchored:T.isAnchored,D=typeof n.menuBarActiveMenu=="string"||n.menuBarActiveMenu===null?n.menuBarActiveMenu:T.menuBarActiveMenu,p=typeof n.menuBarActiveSubmenu=="string"||n.menuBarActiveSubmenu===null?n.menuBarActiveSubmenu:T.menuBarActiveSubmenu,j=q(n.scrapers),w=H(n.scraperDraft),r=typeof n.scraperBuilderOpen=="boolean"?n.scraperBuilderOpen:T.scraperBuilderOpen,t=typeof n.scraperRunnerOpen=="boolean"?n.scraperRunnerOpen:T.scraperRunnerOpen,c=typeof n.scraperRunnerId=="string"||n.scraperRunnerId===null?n.scraperRunnerId:T.scraperRunnerId,m=n.scraperRunnerResults&&typeof n.scraperRunnerResults=="object"?n.scraperRunnerResults:T.scraperRunnerResults,i=typeof n.scraperRunnerError=="string"||n.scraperRunnerError===null?n.scraperRunnerError:T.scraperRunnerError,a=Array.isArray(n.quickBarToolIds)?n.quickBarToolIds.filter(g=>typeof g=="string"):T.quickBarToolIds,u=n.toolWindows&&typeof n.toolWindows=="object"?n.toolWindows:T.toolWindows,d=n.toolData&&typeof n.toolData=="object"?n.toolData:T.toolData;return{...T,...n,tabOffsetY:s,isAnchored:$,menuBarActiveMenu:D,menuBarActiveSubmenu:p,scrapers:j,scraperDraft:w,scraperBuilderOpen:r,scraperRunnerOpen:t,scraperRunnerId:c,scraperRunnerResults:m,scraperRunnerError:i,quickBarToolIds:a,toolWindows:u,toolData:d,version:T.version}},G=async()=>{const e=await chrome.storage.local.get(O);return _(e[O])},V=async e=>{const n=await G(),s=typeof e=="function"?e(n):{...n,...e},$=_(s);return await chrome.storage.local.set({[O]:$}),$},Y=z(()=>{chrome.commands.onCommand.addListener(async e=>{e==="toggle-xcalibr-visibility"&&await V(n=>({...n,isVisible:!n.isVisible}))}),chrome.runtime.onMessage.addListener((e,n,s)=>{if((e==null?void 0:e.type)==="xcalibr-fetch-robots")return(async()=>{var u;const r=(u=n.tab)==null?void 0:u.id;if(typeof r!="number"){s({error:"No active tab available."});return}const c=(await chrome.tabs.get(r)).url;if(!c){s({error:"Unable to resolve tab URL."});return}const m=new URL(c).origin,a=await(await fetch(`${m}/robots.txt`,{redirect:"follow"})).text();s({url:`${m}/robots.txt`,content:a,updatedAt:Date.now()})})().catch(r=>{s({error:r instanceof Error?r.message:"Failed to fetch robots.txt."})}),!0;if((e==null?void 0:e.type)==="xcalibr-fetch-headers")return(async()=>{var a;const r=(a=n.tab)==null?void 0:a.id;if(typeof r!="number"){s({error:"No active tab available."});return}const c=(await chrome.tabs.get(r)).url;if(!c){s({error:"Unable to resolve tab URL."});return}const m=await fetch(c,{redirect:"follow"}),i=Array.from(m.headers.entries()).map(([u,d])=>({name:u,value:d}));s({url:c,status:m.status,headers:i,updatedAt:Date.now()})})().catch(r=>{s({error:r instanceof Error?r.message:"Failed to fetch headers."})}),!0;if((e==null?void 0:e.type)==="xcalibr-payload-replay")return(async()=>{const r=e.payload,t=r.method==="GET"||r.method==="HEAD"?void 0:r.body,c=new TextEncoder().encode(`${r.method} ${r.url}
${r.headers.map(y=>`${y.name}: ${y.value}`).join(`
`)}

${t||""}`).length,m=performance.now(),i=await fetch(r.url,{method:r.method,headers:Object.fromEntries(r.headers.map(y=>[y.name,y.value])),body:t,credentials:r.includeCredentials?"include":"omit",redirect:r.followRedirects!==!1?"follow":"manual"}),a=performance.now()-m,u=await i.text(),d=new TextEncoder().encode(u).length,g=Array.from(i.headers.entries()).map(([y,E])=>({name:y,value:E})),h=i.redirected,x=i.url!==r.url?i.url:void 0;s({responseStatus:i.status,responseHeaders:g,responseBody:u,latencyMs:a,requestSize:c,responseSize:d,redirectCount:h?1:0,finalUrl:x,error:void 0})})().catch(r=>{s({error:r instanceof Error?r.message:"Request failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-couchdb-fetch")return(async()=>{const{url:r}=e.payload,t=await fetch(r,{method:"GET"}),c=await t.text();s({output:c,error:t.ok?"":`Request failed (${t.status})`})})().catch(r=>{s({output:"",error:r instanceof Error?r.message:"Fetch failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-http-request")return(async()=>{const r=e.payload,t=await fetch(r.url,{method:r.method,headers:r.headers,body:r.method==="GET"||r.method==="HEAD"?void 0:r.body}),c=await t.text();s({status:t.status,statusText:t.statusText,headers:Array.from(t.headers.entries()).map(([m,i])=>({name:m,value:i})),body:c})})().catch(r=>{s({status:0,statusText:"",headers:[],body:"",error:r instanceof Error?r.message:"Request failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-whois-lookup")return(async()=>{const{domain:r}=e.payload;let t=r.toLowerCase().trim();t.includes("://")&&(t=new URL(t).hostname),t=t.replace(/^www\./,"");const c=t.split("."),m=c[c.length-1],i={com:"https://rdap.verisign.com/com/v1/domain/",net:"https://rdap.verisign.com/net/v1/domain/",org:"https://rdap.publicinterestregistry.org/rdap/domain/",io:"https://rdap.nic.io/domain/",co:"https://rdap.nic.co/domain/",dev:"https://rdap.nic.google/domain/",app:"https://rdap.nic.google/domain/",me:"https://rdap.nic.me/domain/",info:"https://rdap.afilias.net/rdap/info/domain/",biz:"https://rdap.nic.biz/domain/"},a=i[m]?`${i[m]}${t}`:`https://rdap.org/domain/${t}`,u=await fetch(a,{headers:{Accept:"application/rdap+json"}});if(!u.ok)throw new Error(`RDAP lookup failed: ${u.status} ${u.statusText}`);const d=await u.json(),g={domain:d.ldhName||t,status:Array.isArray(d.status)?d.status.join(", "):"Unknown",registrar:"",registrant:"",createdDate:"",expiresDate:"",updatedDate:"",nameservers:[]};if(Array.isArray(d.events)){for(const h of d.events)if(h.eventDate){const x=new Date(h.eventDate).toLocaleDateString();h.eventAction==="registration"?g.createdDate=x:h.eventAction==="expiration"?g.expiresDate=x:h.eventAction==="last changed"&&(g.updatedDate=x)}}if(Array.isArray(d.entities))for(const h of d.entities){const x=h.vcardArray;if(Array.isArray(x)&&x[1]){const y=x[1].find(B=>Array.isArray(B)&&B[0]==="fn"),E=y?y[3]:void 0;Array.isArray(h.roles)&&(h.roles.includes("registrar")&&E&&(g.registrar=E),h.roles.includes("registrant")&&E&&(g.registrant=E))}}Array.isArray(d.nameservers)&&(g.nameservers=d.nameservers.map(h=>h.ldhName).filter(Boolean)),s({result:g})})().catch(r=>{s({error:r instanceof Error?r.message:"WHOIS lookup failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-dns-lookup")return(async()=>{var a,u,d;const{domain:r}=e.payload;let t=r.toLowerCase().trim();t.includes("://")&&(t=new URL(t).hostname),t=t.replace(/^www\./,"");const c=["A","AAAA","MX","NS","TXT","CNAME","SOA"],m=[],i=await Promise.allSettled(c.map(async g=>{const h=`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(t)}&type=${g}`,x=await fetch(h,{headers:{Accept:"application/dns-json"}});return x.ok?x.json():null}));for(let g=0;g<i.length;g++){const h=i[g];if(h.status==="fulfilled"&&((a=h.value)!=null&&a.Answer))for(const x of h.value.Answer){const y={type:c[g],name:((u=x.name)==null?void 0:u.replace(/\.$/,""))||t,value:((d=x.data)==null?void 0:d.replace(/\.$/,""))||"",ttl:x.TTL};if(c[g]==="MX"&&typeof x.data=="string"){const E=x.data.split(" ");E.length>=2&&(y.priority=parseInt(E[0],10),y.value=E.slice(1).join(" ").replace(/\.$/,""))}m.push(y)}}if(m.length===0)throw new Error("No DNS records found");s({records:m})})().catch(r=>{s({error:r instanceof Error?r.message:"DNS lookup failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-reverse-ip-lookup")return(async()=>{const{ip:r}=e.payload,t=r.trim(),c=/^(\d{1,3}\.){3}\d{1,3}$/,m=/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^::([0-9a-fA-F]{1,4}:){0,6}[0-9a-fA-F]{1,4}$|^([0-9a-fA-F]{1,4}:){1,7}:$|^([0-9a-fA-F]{1,4}:){0,6}::([0-9a-fA-F]{1,4}:){0,5}[0-9a-fA-F]{1,4}$/;if(!c.test(t)&&!m.test(t))throw new Error("Invalid IP address format");const i=`https://api.hackertarget.com/reverseiplookup/?q=${encodeURIComponent(t)}`,a=await fetch(i);if(!a.ok)throw new Error(`Reverse IP lookup failed: ${a.status}`);const u=await a.text();if(u.startsWith("error"))throw new Error(u);const d=u.split(`
`).map(g=>g.trim()).filter(g=>g&&!g.startsWith("error")&&g.includes("."));if(d.length===0)throw new Error("No domains found for this IP");s({domains:d})})().catch(r=>{s({error:r instanceof Error?r.message:"Reverse IP lookup failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-username-search")return(async()=>{const{username:r}=e.payload,t=[{name:"Twitter",url:`https://twitter.com/${r}`},{name:"GitHub",url:`https://github.com/${r}`},{name:"Reddit",url:`https://reddit.com/user/${r}`},{name:"Instagram",url:`https://instagram.com/${r}`},{name:"LinkedIn",url:`https://linkedin.com/in/${r}`}],c=[];for(const m of t)try{const i=await fetch(m.url,{method:"HEAD",redirect:"manual"});let a;i.status===200||i.status===301||i.status===302?a="found":i.status===404?a="not_found":i.status===403||i.status===429?a="error":a=i.status>=400?"not_found":"found",c.push({platform:m.name,url:m.url,status:a,statusCode:i.status,error:a==="error"?`HTTP ${i.status}`:void 0})}catch(i){c.push({platform:m.name,url:m.url,status:"error",statusCode:0,error:i instanceof Error?i.message:"Connection failed"})}s({results:c})})().catch(r=>{s({error:r instanceof Error?r.message:"Username search failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-email-breach-check")return(async()=>{const{email:r}=e.payload,t=`https://haveibeenpwned.com/api/v3/breachedaccount/${encodeURIComponent(r)}?truncateResponse=false`;try{const c=await fetch(t,{method:"GET",headers:{"User-Agent":"XCalibr-Extension","hibp-api-key":""}});if(c.status===404){s({breaches:[]});return}if(c.status===401)throw new Error("API key required. HIBP now requires a paid API key.");if(c.status===429)throw new Error("Rate limit exceeded. Please try again later.");if(!c.ok)throw new Error(`API error: ${c.status}`);const i=(await c.json()).map(a=>({name:a.Name,domain:a.Domain,breachDate:a.BreachDate,addedDate:a.AddedDate,pwnCount:a.PwnCount,description:a.Description.replace(/<[^>]*>/g,""),dataClasses:a.DataClasses,isVerified:a.IsVerified,isSensitive:a.IsSensitive}));s({breaches:i})}catch(c){if(c instanceof Error&&c.message.includes("API key"))s({error:"Email breach checking requires a Have I Been Pwned API key. Visit haveibeenpwned.com/API/Key to get one."});else throw c}})().catch(r=>{s({error:r instanceof Error?r.message:"Email breach check failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-ssl-cert-decode")return(async()=>{const{domain:r}=e.payload;let t=r.toLowerCase().trim();t.includes("://")&&(t=new URL(t).hostname),t=t.replace(/^www\./,"");const c=`https://crt.sh/?q=${encodeURIComponent(t)}&output=json`,m=await fetch(c,{headers:{Accept:"application/json"}});if(!m.ok)throw new Error(`Failed to fetch certificate: ${m.status}`);const i=await m.json();if(!i||i.length===0)throw new Error("No certificates found for this domain");const a=i[0],u={};a.issuer_name.split(",").forEach(E=>{const[B,o]=E.trim().split("=");B&&o&&(u[B.trim()]=o.trim())});const d=new Date(a.not_after),g=new Date,h=Math.floor((d.getTime()-g.getTime())/(1e3*60*60*24)),x=a.name_value.split(`
`).map(E=>E.trim()).filter(Boolean),y={subject:{CN:a.common_name,O:void 0,C:void 0},issuer:{CN:u.CN||u.O||"Unknown",O:u.O,C:u.C},validFrom:a.not_before,validTo:a.not_after,serialNumber:a.serial_number,fingerprint:`ID: ${a.id}`,signatureAlgorithm:"See crt.sh for details",keySize:void 0,sans:x,isExpired:h<0,daysUntilExpiry:h};s({certificate:y})})().catch(r=>{s({error:r instanceof Error?r.message:"SSL certificate decode failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-subdomain-find")return(async()=>{const{domain:r}=e.payload;let t=r.toLowerCase().trim();t.includes("://")&&(t=new URL(t).hostname),t=t.replace(/^www\./,"");const c=`https://crt.sh/?q=%25.${encodeURIComponent(t)}&output=json`,m=await fetch(c,{headers:{Accept:"application/json"}});if(!m.ok)throw new Error(`Failed to fetch subdomains: ${m.status}`);const i=await m.json();if(!i||i.length===0){s({subdomains:[]});return}const a=new Set;for(const d of i){if(d.common_name){const g=d.common_name.toLowerCase().trim();(g.endsWith(`.${t}`)||g===t)&&a.add(g)}if(d.name_value){const g=d.name_value.split(`
`);for(const h of g){const x=h.toLowerCase().trim();x&&!x.startsWith("*")&&(x.endsWith(`.${t}`)||x===t)&&a.add(x)}}}const u=Array.from(a).sort();s({subdomains:u})})().catch(r=>{s({error:r instanceof Error?r.message:"Subdomain search failed."})}),!0;if((e==null?void 0:e.type)==="xcalibr-wayback-search")return(async()=>{const{url:r}=e.payload;let t=r.trim();!t.startsWith("http://")&&!t.startsWith("https://")&&(t="https://"+t);const c=`https://web.archive.org/cdx/search/cdx?url=${encodeURIComponent(t)}&output=json&fl=timestamp,original,statuscode,mimetype&collapse=timestamp:6&limit=500`,m=await fetch(c,{headers:{Accept:"application/json"}});if(!m.ok)throw new Error(`Failed to fetch from Wayback Machine: ${m.status}`);const i=await m.json();if(!i||i.length<=1){s({snapshots:[]});return}const a=i.slice(1).map(u=>({timestamp:u[0],original:u[1],statuscode:u[2],mimetype:u[3]}));a.sort((u,d)=>d.timestamp.localeCompare(u.timestamp)),s({snapshots:a})})().catch(r=>{s({error:r instanceof Error?r.message:"Wayback Machine search failed."})}),!0;if((e==null?void 0:e.type)!=="xcalibr-inject-code")return;const{scope:$,code:D}=e.payload,p=async w=>{await chrome.scripting.insertCSS({target:{tabId:w},css:D})};return(async()=>{var r;if($==="current"){const t=(r=n.tab)==null?void 0:r.id;typeof t=="number"&&await p(t),s({ok:!0});return}const w=await chrome.tabs.query({});await Promise.allSettled(w.map(t=>t.id).filter(t=>typeof t=="number").map(t=>p(t))),s({ok:!0})})().catch(()=>s({ok:!1})),!0})});function Q(){}var N={exports:{}},X=N.exports,W;function Z(){return W||(W=1,(function(e,n){(function(s,$){$(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:X,function(s){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)s.exports=globalThis.browser;else{const $="The message port closed before a response was received.",D=p=>{const j={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(j).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class w extends WeakMap{constructor(l,f=void 0){super(f),this.createItem=l}get(l){return this.has(l)||this.set(l,this.createItem(l)),super.get(l)}}const r=o=>o&&typeof o=="object"&&typeof o.then=="function",t=(o,l)=>(...f)=>{p.runtime.lastError?o.reject(new Error(p.runtime.lastError.message)):l.singleCallbackArg||f.length<=1&&l.singleCallbackArg!==!1?o.resolve(f[0]):o.resolve(f)},c=o=>o==1?"argument":"arguments",m=(o,l)=>function(b,...k){if(k.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${c(l.minArgs)} for ${o}(), got ${k.length}`);if(k.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${c(l.maxArgs)} for ${o}(), got ${k.length}`);return new Promise((C,S)=>{if(l.fallbackToNoCallback)try{b[o](...k,t({resolve:C,reject:S},l))}catch(A){console.warn(`${o} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,A),b[o](...k),l.fallbackToNoCallback=!1,l.noCallback=!0,C()}else l.noCallback?(b[o](...k),C()):b[o](...k,t({resolve:C,reject:S},l))})},i=(o,l,f)=>new Proxy(l,{apply(b,k,C){return f.call(k,o,...C)}});let a=Function.call.bind(Object.prototype.hasOwnProperty);const u=(o,l={},f={})=>{let b=Object.create(null),k={has(S,A){return A in o||A in b},get(S,A,P){if(A in b)return b[A];if(!(A in o))return;let v=o[A];if(typeof v=="function")if(typeof l[A]=="function")v=i(o,o[A],l[A]);else if(a(f,A)){let M=m(A,f[A]);v=i(o,o[A],M)}else v=v.bind(o);else if(typeof v=="object"&&v!==null&&(a(l,A)||a(f,A)))v=u(v,l[A],f[A]);else if(a(f,"*"))v=u(v,l[A],f["*"]);else return Object.defineProperty(b,A,{configurable:!0,enumerable:!0,get(){return o[A]},set(M){o[A]=M}}),v;return b[A]=v,v},set(S,A,P,v){return A in b?b[A]=P:o[A]=P,!0},defineProperty(S,A,P){return Reflect.defineProperty(b,A,P)},deleteProperty(S,A){return Reflect.deleteProperty(b,A)}},C=Object.create(o);return new Proxy(C,k)},d=o=>({addListener(l,f,...b){l.addListener(o.get(f),...b)},hasListener(l,f){return l.hasListener(o.get(f))},removeListener(l,f){l.removeListener(o.get(f))}}),g=new w(o=>typeof o!="function"?o:function(f){const b=u(f,{},{getContent:{minArgs:0,maxArgs:0}});o(b)}),h=new w(o=>typeof o!="function"?o:function(f,b,k){let C=!1,S,A=new Promise(R=>{S=function(I){C=!0,R(I)}}),P;try{P=o(f,b,S)}catch(R){P=Promise.reject(R)}const v=P!==!0&&r(P);if(P!==!0&&!v&&!C)return!1;const M=R=>{R.then(I=>{k(I)},I=>{let U;I&&(I instanceof Error||typeof I.message=="string")?U=I.message:U="An unexpected error occurred",k({__mozWebExtensionPolyfillReject__:!0,message:U})}).catch(I=>{console.error("Failed to send onMessage rejected reply",I)})};return M(v?P:A),!0}),x=({reject:o,resolve:l},f)=>{p.runtime.lastError?p.runtime.lastError.message===$?l():o(new Error(p.runtime.lastError.message)):f&&f.__mozWebExtensionPolyfillReject__?o(new Error(f.message)):l(f)},y=(o,l,f,...b)=>{if(b.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${c(l.minArgs)} for ${o}(), got ${b.length}`);if(b.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${c(l.maxArgs)} for ${o}(), got ${b.length}`);return new Promise((k,C)=>{const S=x.bind(null,{resolve:k,reject:C});b.push(S),f.sendMessage(...b)})},E={devtools:{network:{onRequestFinished:d(g)}},runtime:{onMessage:d(h),onMessageExternal:d(h),sendMessage:y.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:y.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},B={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return j.privacy={network:{"*":B},services:{"*":B},websites:{"*":B}},u(p,E,j)};s.exports=D(chrome)}})})(N)),N.exports}Z();function F(e,...n){}const K={debug:(...e)=>F(console.debug,...e),log:(...e)=>F(console.log,...e),warn:(...e)=>F(console.warn,...e),error:(...e)=>F(console.error,...e)};let L;try{L=Y.main(),L instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw K.error("The background crashed on startup!"),e}return L})();
background;
